@model Kenmark_Consumer.Models.CMS_Home_Image_Class

@{
    ViewBag.Title = "Form";
}

<script type="text/javascript">

    $(function () {
        $('.date-picker').datepicker();
        $('.pageContent').hide();

        $('.pageTitle').click(function () {

            var page = this.id;

            $('.pageContent').hide();

            $('#' + page + "Span").show();

            $('.' + page + 'Upload').show();
        });
    });

    $(function () {
        $('#AddBlogFrom').die();
        $("#AddBlogFrom").live('submit', function (e) {
            //some code
            $(this).submit();
            e.preventDefault();
        });
    });
</script>

<div style="margin-top:50px;">



@if (ViewBag.Type == "Edit")
{
    using (Ajax.BeginForm("EditShow", "CMS_Home_Images", new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "edit-wrapper" }))
    { 
        <div class="col-xs-12">
            <span style="font-size:22px;">Which image would you like to edit?</span>
        </div>
    
        <div class="col-xs-12 col-sm-12">
            <input type="hidden" id="edit_id" name="edit_id" >

            @for (int i = 0; i < Model.Releases.Count; i++)
            { 
               <div class="col-xs-6" style="margin-bottom:50px;">
                   <span style="font-size:16px;">Block @i</span><br />
                   <img src="../@Model.Releases[i].image" class="img-responsive img-thumbnail img-edit" onclick="$('#edit_id').val('@(Model.Releases[i].id)');$('.img-edit').css('border','none');$(this).css('border','1px solid blue');"/>
               </div>                 
            }
        
        
       </div>

       <div class="col-xs-12" style="margin-top: 50px;margin-bottom:20px;">
           <button class="btn btn-default submitButton" id="submit-edit" type="submit">Submit</button>
       </div>
    }
    
    <div id="edit-wrapper">

    </div>
}

@if (ViewBag.Type == "EDIT2")
{
    using (Html.BeginForm("SaveEditShow", "CMS_Home_Images", FormMethod.Post, new { enctype = "multipart/form-data", id = "EditBlogFrom" }))
    {
        @Html.HiddenFor(m => m.Release.id)
        @Html.HiddenFor(m => m.Release.block_size)
        
        if (!String.IsNullOrEmpty(ViewBag.Error))
        {
        <div class="col-xs-12" style="font-size:16px;font-weight:bold;color:red;">            
            <span>Errors:</span><br />
            @Html.Raw(ViewBag.Error)
            <br /><br />
        </div>
        }       


        
        if(Model.Release.block_size == 2)
        {
          <div class="col-xs-12 col-sm-12" style="margin-top:20px;">
            <label for="photo">Upload Image: <br />(1070x560 px) </label>
            <input type="file" name="main_image" class="btn btn-default" />
        </div>
        }   
        else{
         <div class="col-xs-12 col-sm-12" style="margin-top:20px;">
            <label for="photo">Upload Image: <br />(310x225 px) </label>
            <input type="file" name="main_image" class="btn btn-default" />
        </div>
        }

        <div class="col-xs-12 col-sm-12" style="margin-bottom: 20px; margin-top:20px;">       
            <span style="font-size:14px;font-weight:bold;">Link:</span><br />
           @Html.TextBoxFor(m => m.Release.link, new { @class = "form-control", @type = "text" })
        </div>
    
        <div class="col-xs-12" style="margin-bottom: 20px;">       
           <span style="font-size:14px; font-weight:bold;">Order:</span><br />
            @Html.DropDownListFor(m => m.Release.rank, Model.Order, new { @class = "form-control", @style = "max-width:85px;" })
        </div> 
    
        <div class="col-xs-12 col-sm-6" style="margin-bottom: 20px; margin-top:20px;">       
            <span style="font-size:14px;font-weight:bold;">Main Text:</span><br />
           @Html.TextBoxFor(m => m.Release.main_text, new { @class = "form-control", @type = "text" })
        </div>
         
        <div class="col-xs-12 col-sm-6" style="margin-bottom: 20px; margin-top:20px;">       
            <span style="font-size:14px;font-weight:bold;">Sub Text:</span><br />
           @Html.TextBoxFor(m => m.Release.sub_text, new { @class = "form-control", @type = "text" })
        </div>
    
            <div class="col-xs-12" style="margin-top: 50px;">
                <button class="btn btn-default submitButton" id="submit-edit" type="submit">Submit</button>
            </div>
    }
}


@if (ViewBag.Type != "EDIT2")
{
<div class="col-xs-12" style="margin-bottom:20px; margin-top:30px;">
    <span style="font-size:14px;">
      <a href="~/CMS_Home_Images">< BACK</a>  
    </span>
</div>
}

</div>